package components

templ CPT(questionID string, settingsJSON string) {
	<div id="cpt-container" class="p-4 text-center" data-question-id={ questionID } data-settings={ settingsJSON }>
	</div>
	<script src="/assets/js/cpt.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const container = document.getElementById('cpt-container'); 
			const settingsString = container.dataset.settings;
			const testSettings = JSON.parse(settingsString);

			initCPT('cpt-container', testSettings, function(results) {
				const form = document.querySelector('#symptom-form');
				if (form) {
					const answerInput = form.querySelector('input[name="answer"]');
					answerInput.value = JSON.stringify(results);
					htmx.trigger(form, 'submit');
				}
			});
		});
	</script>
}